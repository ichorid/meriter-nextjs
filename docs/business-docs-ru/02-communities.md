# 02. Сообщества

> Структура и настройки сообществ платформы.

---

## Типы сообществ

### Глобальные сообщества (Публичные группы)

Создаются администрацией платформы.

**Характеристики:**
- Все пользователи состоят в них по умолчанию, сразу после регистрации
- Делят один общий мерит между собой
- Заработанные в одном глобальном сообществе мериты можно тратить в другом глобальном сообществе
- Пользователь не может выйти из глобального сообщества
- Список глобальных сообществ может расширяться

### Локальные сообщества (Приватные группы)

Создаются и управляются пользователями.

**Характеристики:**
- Имеют свой собственный мерит (отдельный от глобального)
- Полный набор настроек доступен лиду
- Пользователь может состоять в любом количестве локальных сообществ
- Пользователь может быть лидом любого количества сообществ
- Пользователь может по своему желанию выйти из любого локального сообщества
- Пользователь-лид не может удалить сообщество — только оставить заявку администрации

---

## Данные сообщества

### Заполняются администратором/лидом

| Поле | Описание |
|------|----------|
| Название | Отображаемое имя сообщества |
| Описание | Текстовое описание целей и правил |
| Аватар | Изображение сообщества |
| Обложка | Фоновое изображение |
| Название валюты | Как называются мериты в этом сообществе |
| Тип | Локальное или глобальное |

### Системные данные

| Поле | Описание |
|------|----------|
| Дата создания | Timestamp создания |
| Список участников | Пользователи, состоящие в сообществе |
| Список постов | Посты, относящиеся к этому сообществу |
| Настройки | Конфигурация поведения (см. ниже) |

---

## Настройки сообществ

Полный список настроек, доступных для конфигурации:

### Публикация контента

| Настройка | Описание | Значение по умолчанию |
|-----------|----------|----------------------|
| `canPublish` | Кто может публиковать посты (по ролям) | Все участники |
| `postFee` | Стоимость публикации поста (в глобальных меритах) | 1 мерит |
| `commentFee` | Стоимость комментария (в глобальных меритах) | 0.1 мерита |
| `canEditPosts` | Могут ли участники редактировать посты | Да |
| `editTimeLimit` | Время на редактирование после публикации | 30 минут |

### Мериты и голосование

| Настройка | Описание | Значение по умолчанию |
|-----------|----------|----------------------|
| `canWithdrawMerits` | Можно ли снимать мериты с постов | Да |
| `canVoteSelf` | Можно ли голосовать за свои посты | Нет (квотой нельзя, меритами — настраивается) |
| `canVoteTeammates` | Можно ли голосовать за посты участников своих локальных сообществ | Да |
| `whoCanVote` | Кто может голосовать (по ролям) | Все участники |
| `quotaEnabled` | Есть ли квота в сообществе | Нет |
| `quotaAmount` | Размер ежедневной квоты | — |
| `welcomeMerits` | Стартовые мериты при вступлении | — |
| `rateMultiplier` | Множитель меритов (рейт) | 1 |

### Тапалка

| Настройка | Описание | Значение по умолчанию |
|-----------|----------|----------------------|
| `tappalkaEnabled` | Включена ли тапалка | Нет |
| `tappalkaShowCost` | Стоимость показа поста в тапалке | 0.1 мерита |
| `tappalkaWinReward` | Награда посту за выбор в тапалке | 1 мерит |
| `tappalkaMinRating` | Минимальный рейтинг для участия в тапалке | 1 мерит |

### Пересылка постов

| Настройка | Описание | Значение по умолчанию |
|-----------|----------|----------------------|
| `forwardMode` | Режим пересылки: `copy` или `transfer` | copy |
| `forwardKeepMerits` | Сохраняются ли мериты при пересылке | Нет (для copy) |

*Примечание: для локальных сообществ режим пересылки всегда `copy` без меритов (не редактируется лидом).*

### Видимость

| Настройка | Описание | Значение по умолчанию |
|-----------|----------|----------------------|
| `visibility` | Кто видит сообщество | Все |

---

## Импорт/экспорт настроек

Предусмотрен импорт-экспорт настроек сообщества в JSON формате для:
- Быстрого создания сообществ по шаблону
- Резервного копирования конфигурации
- Миграции настроек между окружениями

---

## Взаимодействие глобальных и локальных сообществ

### Оплата действий
- Fee за посты и комментарии в ЛЮБОМ сообществе (включая локальные) оплачивается **глобальными** меритами
- Голосование в локальном сообществе — локальными меритами этого сообщества
- Если локальных меритов нет — можно голосовать глобальными (для опросов)

### Пересылка между сообществами
- Из глобального в глобальное: настраивается админом
- Из локального: всегда копия без меритов
- Из «Проектов» в «МД»: перенос с меритами (специальное правило MVP)

---

## Будущие фичи (v2.0+)

### Кошелёк сообщества
Локальное сообщество сможет выступать участником глобальных сообществ:
- Админ постит от лица сообщества
- Сообщество получает и тратит мериты
- Отдельный баланс от личных кошельков участников
