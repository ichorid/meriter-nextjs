# 04. Посты

> Типы контента, жизненный цикл, рейтинг и пересылка.

---

## Базовый пост

Основной тип контента на платформе. Все остальные типы наследуются от базового.

### Данные, заполняемые пользователем

| Поле | Обязательность | Описание |
|------|----------------|----------|
| Заголовок | Да | Название поста |
| Описание | Да | Основной текст |
| Изображения | Нет | Прикреплённые картинки |
| Категории | Нет | Из списка, определённого админом сообщества |

### Системные данные

| Поле | Описание |
|------|----------|
| Дата создания | Timestamp создания |
| Автор | Пользователь-создатель |
| Сообщество | Где выложен пост |
| Прямая ссылка | URL для шаринга |
| Рейтинг | Текущее количество меритов на посте |
| Максимальный рейтинг | Историческое максимальное значение |
| Комментарии | Список комментариев к посту |

---

## Опрос (Poll)

Наследуется от базового поста.

### Отличия от базового поста

| Характеристика | Базовый пост | Опрос |
|----------------|--------------|-------|
| Собственный рейтинг | Да | Нет |
| Комментарии с весом | Да | Только нейтральные |
| Дополнительные поля | — | Вопрос, варианты ответа |
| Ограничение по времени | Нет | Опционально |

### Данные опроса

| Поле | Описание |
|------|----------|
| Вопрос | Текст вопроса |
| Варианты ответа | Список опций для голосования |
| Дедлайн | Опциональное время закрытия голосования |

### Голосование в опросе
- Стоит пользователю меритов (количество настраивается в сообществе)
- Вес голоса = количество потраченных меритов
- После дедлайна новые голоса не принимаются

---

## Проект (v2.0)

*Отложено до версии 2.0 — требует проработки механики верификации.*

### Концепция
Предполагает сбор и привлечение ресурсов на реализацию определённой идеи.

### Отличия от базового поста
- Дополнительные поля «ресурсы»: деньги, помощь и т.д. — всё, что нужно для реализации
- Заполняются пользователем при создании

### Планируемая логика (v2.0+)

**Статусы проекта:**
- Идея
- В процессе
- Завершён

**Верификация завершения:**
- Автор нажимает кнопку «проект завершён»
- Проект попадает в листинг завершённых
- Верификаторы (школы, НКО, доверенные люди) подтверждают
- Верификаторы несут ответственность в размере суммы меритов на посте
- При обмане — штраф списывается с их счёта

**Текущее решение:** 
Обходиться связкой «базовый пост + опрос», предусмотреть в посте место для списка ресурсов.

---

## Рейтинг поста

### Как формируется рейтинг
- Рейтинг = сумма меритов, «прикреплённых» к посту через комментарии
- Позитивные комментарии увеличивают рейтинг
- Негативные комментарии уменьшают рейтинг
- Может быть отрицательным

### Снятие меритов с поста
- Автор может снять мериты с рейтинга поста на свой кошелёк
- При снятии рейтинг поста уменьшается
- Доступность снятия определяется настройками сообщества

### Минусовой рейтинг
- Если рейтинг ушёл в минус — через 24 часа минус списывается с кошелька автора
- Автор может закрыть пост до истечения 24 часов, чтобы избежать списания

---

## Жизненный цикл поста

```
┌─────────────┐
│   Создание  │ ─── fee списывается с кошелька
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   Активен   │ ─── получает голоса, участвует в тапалке
└──────┬──────┘
       │
       ├─────────────────────────────────────┐
       │                                     │
       ▼                                     ▼
┌─────────────┐                    ┌─────────────────┐
│  Переслан   │                    │ Закрыт (архив)  │
│ (в др. соо) │                    │ нельзя повторно │
└─────────────┘                    └─────────────────┘
```

### Редактирование
- Доступно в течение времени, заданного в настройках сообщества
- По умолчанию: 30 минут после публикации
- После истечения времени — только закрытие или пересылка

### Закрытие поста
- Пост удаляется из ленты
- Сохраняется в архиве профиля пользователя
- **Нельзя выложить повторно**
- Мериты, оставшиеся на посте, можно снять перед закрытием

---

## Пересылка постов

### Режимы пересылки

| Режим | Описание | Когда используется |
|-------|----------|-------------------|
| **Копия** | Без меритов, исходник сохраняется | По умолчанию |
| **Перенос** | С меритами, исходник удаляется | Из «Проектов» в «МД» |

### Правила по типам сообществ

| Откуда | Куда | Режим |
|--------|------|-------|
| Глобальное | Глобальное | Настраивается админом |
| Локальное | Любое | Всегда копия без меритов |
| «Проекты» | «МД» | Перенос с меритами |

### Ограничения
- Для локальных сообществ режим пересылки всегда заблокирован: копируется без меритов
- Лид локального сообщества не может изменить этот дефолт

---

## Тапалка и посты

### Участие в тапалке
- Пост участвует в тапалке, если она включена для сообщества
- Каждый показ в тапалке стоит 0.1 мерита (оплачивается с рейтинга поста или кошелька автора)
- Нет меритов или меньше стоп-лосса → пост перестаёт показываться

### Стоп-лосс
- Минимальный порог рейтинга/меритов для показа
- Настраивается владельцем поста
- **Нельзя отключить показ в тапалке** — только установить стоп-лосс или закрыть пост

### Что получает пост в тапалке
- При выборе пользователем: +1 мерит (эмиссия, не с кошелька пользователя)
- При проигрыше: ничего (но 0.1 за показ всё равно списывается)
