# Cursor Workflow для Meriter

## Быстрый старт (простые задачи)

Для мелких правок (баг, небольшое изменение):
1. Открой нужный файл
2. `Cmd+K` / `Ctrl+K` → опиши что нужно
3. Проверь diff → Accept
4. `pnpm lint && pnpm build`

---

## Полный флоу (новая фича / большие изменения)

### Фаза 1: Планирование

1. **Создай PRD** из шаблона `docs/templates/PRD-TEMPLATE.md`
2. **Сохрани PRD** в `docs/prd/[название-фичи].md`
3. **Открой Chat в Cursor**, прикрепи PRD:
```
   @docs/prd/[название-фичи].md
   
   Проанализируй этот PRD. Задай уточняющие вопросы (максимум 3), 
   если что-то неясно. Затем создай план реализации.
```

### Фаза 2: Подготовка

4. **Создай ветку**:
```
   git checkout -b feat/[название-фичи]
```

5. **Попроси Cursor найти связанные файлы**:
```
   Найди все файлы, которые нужно изменить для реализации этой фичи.
   Покажи существующие паттерны, которые нужно использовать.
```

### Фаза 3: Реализация

6. **Работай итеративно** — по одной задаче из плана:
```
   Реализуй [конкретный пункт из плана].
   Следуй паттернам из существующего кода.
```

7. **После каждого логического блока**:
   - Проверь diff перед Accept
   - `pnpm lint`
   - Коммит с понятным сообщением

8. **Если что-то сломалось**:
```
   Эта реализация сломала [что именно]. 
   Ошибка: [текст ошибки]
   Исправь, сохраняя существующий функционал.
```

### Фаза 4: Проверка

9. **Запусти тесты и билд**:
```bash
   pnpm lint
   pnpm build
   pnpm test
```

10. **Попроси Cursor проверить**:
```
    Объясни что делает код, который ты написал.
    Есть ли потенциальные проблемы или edge cases?
```

---

## Выбор инструмента

| Задача | Инструмент |
|--------|------------|
| Правка 1-10 строк | `Cmd+K` / `Ctrl+K` |
| Изменения в одном файле | Chat |
| Изменения в нескольких файлах | Agent Mode |
| "Как это работает?" | Ask Mode |
| Планирование большой фичи | Ask Mode + PRD |

---

## Полезные промпты

### Исследование кода
```
Найди где реализован [механизм X]
Объясни как работает связь между [A] и [B]
Покажи примеры использования [функция/компонент]
```

### Рефакторинг
```
Отрефактори этот файл, следуя паттернам проекта.
Разбей на более мелкие функции/компоненты.
```

### Дебаг
```
Ошибка: [текст ошибки]
Файл: [путь]
Что может быть причиной и как исправить?
```

### Добавление функционала
```
Добавь [функционал] по аналогии с @[существующий-файл.ts]
Используй те же паттерны и стиль кода.
```

---

## Чего НЕ делать

❌ Большие промпты без структуры
❌ "Сделай всё приложение" в одном запросе  
❌ Accept без проверки diff
❌ Игнорировать ошибки линтера/тайпскрипта
❌ Коммитить без тестов
❌ Несколько фич в одной ветке

---

## Когда Cursor "плывёт"

Если AI начинает давать странные ответы или ломать код:

1. **Начни новый чат** — контекст мог "замусориться"
2. **Уточни контекст** — прикрепи конкретные файлы через `@`
3. **Разбей задачу** — возможно, слишком большой scope
4. **Покажи пример** — `@существующий-файл.ts` как образец