**КРАТКАЯ СПЕЦИФИКАЦИЯ ПРОЕКТА**
================================

_Сперва в общих чертах, ниже будет подробно_

Создаём платформу, на которой есть:

1.  **Четыре вида пользователей:**
    
    1.  Суперадмин (администрация проекта, мы)
        
    2.  Представители команд (учителя школ, например – взрослые, кого мы приглашаем в проект)
        
    3.  Участники команд (школьники, которых выбрали и пригласили уже сами представители команд)
        
    4.  Зрители (все остальные)
        
2.  **Три вида коммьюнити:**
    
    1.  Группа "Образ будущего". Существует в единственном экземпляре. В этой группе состоят ТОЛЬКО представители команд ("учителя"), которых пригласил и утвердил суперадмин. ТОЛЬКО они имеют право размещать там контент и раздавать ему мериты.
        
    2.  Группа "Марафон добра". Существует в единственном экземпляре. В ней состоят все пользователи проекта, НО публиковать контент могут ТОЛЬКО представители команд. Все остальные (участники команд, зрители) могут только раздавать контенту мериты, исходя из своей ежедневной квоты. 
        
    3.  Внутренние группы команд. Существуют в любом необходимом количестве. Каждая группа создаётся нами при заведении аккаунта представителя команды, этот же представитель становится администратором внутренней группы.

Цепочка выглядит так:

1.  Организатор публикует в группе "Образ будущего" головной пост с вводными по игре: "Цивилизация будущего, достижения, всё круто, справедливо, дополняйте своим видением".
    
2.  Организатор приглашает в проект Представителей (учителей), связавшись с ними за пределами платформы.
    
3.  Представитель регистрируется на платформе, Орг его аппрувит
    
4.  Представитель приглашает в проект школьников – участников команды. Они регистрируются, подают заявки в группы команд, Представитель их принимает
    
5.  Участники группы внутри группы "Команданейм" делятся своими образами будущего, основанными на ценностях, указанных участниками и представителем.
    
6.  Участники группы внутри группы "Команданейм" голосуют за предложенные другими участниками команды образы будущего (за свои голосовать нельзя) меритами
    
7.  Представитель выбирает получившие внутри команды наибольшее одобрение идеи образов будущего и постит их в группе "Образ будущего" на всеобщее обозрение. По регламенту, представитель вручную указывает автора идеи, но постит ТОЛЬКО представитель (взрослый).
    
8.  Команда совершает добрые дела, которые соответствуют идеям выбранного командой образа будущего (приближают его к воплощению в реальность).
    
9.  В разделе "Марафон добра" публикуются отчёты о делах, которые команда совершила. Представитель постит отчёты об этом в группу "Марафон добра" с кратким комментарием (опционально), поясняющим, каким именно образом это доброе дело приближает их образ будущего и отвечает их ценностям.
    
10.  Также, в версии 1.0, в "Марафон добра" можно публиковать идеи: дела и проекты, которые команда только запланировала, но пока не осуществила. В комментариях команда может обсуждать участие зрителей, их поддержку и тд. Посты с идеями отмечены как "ПРОЕКТ", голосование за них НЕВОЗМОЖНО, МЕРИТЫ НЕ НАЧИСЛЯЮТСЯ.
    
11.  В группу "Марафон добра" может постить только Представитель, но, как и с образами будущего, указывает автора/авторов доброго дела.
    
12.  Зрители – пользователи, привлечённые в проект участниками команд и нами (родители, друзья и тд) – голосуют за посты с добрыми делами в группе "Марафон добра", используя мериты,
    
13.  Все мериты, собранные постами с добрыми делами, попадают на кошелёк Представителя команды, опубликовавшего пост.
    
14.  Используя эти мериты, Представитель команды оценивает проекты в группе "Образ будущего": голосует за идеи своей команды или, если таково его желание, за чужие. Ограничений нет. 
    

_Можно минусовать своими меритами (не из квоты, только полученными) чужие образы будущего, если вы с ними не согласны или они вредят, но обязательно поясняя, в чем это несогласие или вред. За комментарии тоже можно голосовать и в плюс, и в минус ._

Ручная модерация суперадмином.

1.  Раз в определённый период – например, в неделю – мы выбираем несколько самых одобренных меритами идей и добавляем их в головной пост "Образ будущего", указывая авторство команды.


Пользователь
============

Профиль
-------

В профиле каждого пользователя мы выводим:

_Звёздочками отмечены обязательные при регистрации пункты, они есть у всех. Для остальных пунктов: не заполнен -> не выводим эти данные просто_

*   Имя\*
    
*   Аватар
    
*   Регион и населённый пункт\* -- Open Street Map (OSM API). Унифицированный список, можно выборку сделать. 
    
*   Роль\*: 
    
    *   Организатор
        
    *   Команданейм (_на самом деле, названием команды мы показываем две роли: и Участника, и Представителя. Для участников просто команданейм, для представителя значок типа короны рядом с названием или что-то вроде того_ – _показать, что это лидер_). Если по нему кликнуть, выводит на профиль Представителя.
        
    *   Зритель
        
*   "О себе" (текстовое поле, до 1000 знаков)
    
*   "Ценности"\* (текстовое поле, до 1000 знаков) -- Руслан и Лика дадут подсказку-пояснение для юзера.
    
*   Контакты\* (рекомендуем адрес почты + мессенджер) – публикуем для всех ТОЛЬКО в профилях Представитель и Организатор, прямые контакты детей не выводим (их видят только Организатор и Представитель команды, куда ребёнок подался), зрителей тоже.
_Чата сейчас на платформе нет, общение происходит за её пределами (личное в смысле), но к январской версии сделаем_
    

Пункты, которые присутствуют не у всех пользователей:

*   Учебное заведение\* – ТОЛЬКО Участник и Представитель
    
*   Счётчик меритов – ТОЛЬКО Представитель. Показываем списком: такое-то коммьюнити -> столько-то меритов заработано (не на счёту актуально, а именно всего заработано). Пример для аккаунта Представителя:
        
    *   "Марафон Добра": 300 меритов
        
    *   "Образ Будущего": 250 меритов
        

Регистрация
-----------

Регистрация: все регистрируются как зрители. 

Регистрация по привязке какого-то сервиса (почта/мессенджер), но после логина пользователь должен заполнить о себе данные в нашем профиле. Список полей по факту перечислен выше, обязательные отмечены звёздочкой. 

При регистрации поле для инвайт-кода, если он есто. И коммент "если инвайт-кода нет, позже в профиле всегда можете его активировать, вступив/создав команду".

После регистрации сообщение (может, прямо в профиле висящее и видимое только Пользователю?):

"Ты хочешь создать команду? Напиши письмо со ссылкой на свой профиль, названием и описанием команды на e-mail организатора: mail@mail.ru", мы всё сделаем.

Ты уже участник какой-то команды? Получи инвайт-код у Представителя, введи его в профиле у себя".

При получении роли "Представитель/Участник команды" должна быть возможность указать Учебное заведение (обязательное поле для них).

Естественно, нужно будет указать согласие с правилами платформы, на обработку персональных данных и тд.

У админов групп есть генераторы инвайтов: у Организатора для Представителей, у Представителей для участников команд.


Редактирование профиля
----------------------

*   Можно менять любые поля, которые были доступны при регистрации, КРОМЕ роли. 
    
*   Роль Представителя можно снять или передать ТОЛЬКО через Организатора
    
*   Роль Участника можно снять, нажав крестик рядом с ней (приводит к автоматическому выходу из группы команды, роль становится Зритель)
 
    

Мериты
------

Для каждого сообщества, в котором состоит пользователь, он получает специфичные для этого сообщества мериты. Мериты, полученные в каком-то сообществе, можно использовать только в этом сообществе _(_\*_примечание: исключение – базовые группы "Образ Будущего" и "Марафон Добра", у них мериты общие. Подробнее см. Группы)_. 

Источников меритов два:

1.  Выданные при регистрации или в ходе ежедневных начислений по квоте мериты (_по умолчанию выдаём 100 меритов. У Организатора есть возможность менять квоту, начислять участникам мериты, снимать и тд. Подробнее см. "Организатор"_).
    
2.  Мериты, полученные от других пользователей, проголосовавших своими меритами за размещённый пользователем пост:
    
    1.  Если пользователь голосует за ЧУЖОЙ пост, автору поста начисляются мериты в соотношении 1:1.
        
    2.  Если пользователь голосует за СВОЙ пост, автору поста (пользователю) ничего не начисляется, просто растёт рейтинг поста. 
        

Мериты начисляются на внутренний счёт пользователя автоматически, в момент, когда их выдали по квоте или когда кто-то передал свои мериты посту пользователя, СНИМАТЬ ИХ С КОШЕЛЬКА В ТЕКУЩЕЙ ВЕРСИИ НЕ НАДО.

**Способов использования меритов 3:**

1.  **Голосование за чужие посты**. Поднимает рейтинг поста, в некоторых кейсах приносит его автору мериты, которыми он тоже сможет где-то за что-то проголосовать (см примечание ниже).
    
2.  **Голосование ПРОТИВ чужих постов**. Снижает рейтинг поста, мериты у его автора НЕ ОТНИМАЕТ. Требует оставить комментарий с пояснением (прямо нажимаем минус, и без коммента оставить нельзя).
    
3.  **Голосование в опросе внутри поста**. Поднимает вариант, за который проголосовали, МЕРИТОВ НИКОМУ НЕ НАЧИСЛЯЕТ.
    

Для любого действия можно использовать любое количество меритов за раз, хоть все.

**Примечание-пояснение**

У нас в 1.0 не так много кейсов с меритами:

*   **Зрители** получают мериты группы "Марафон Добра" по квоте, зарабатывать их никак не могут, тратят только на голосование за посты в группе "Марафон Добра".
    
*   **Участники** получают мериты:
    
    *   Группы "Марафон Добра" по квоте (как и зритель), тратят только на голосование за посты в группе "Марафон Добра", причём за посты своего Представителя голосовать не могут. Зарабатывать их никак не могут.
        
    *   Группы своей команды по квоте. Тратят их на голосование за посты в группе своей команды или на участие в опросах-голосованиях внутри постов, **голосовать за свои посты не могут**, зарабатывать их никак не могут (получили по квоте -> потратили на голосование, ждём некст квоту).
        
*   **Представители** получают мериты:
    
    *   Группы "Марафон Добра" по квоте (как и зритель), тратят только на голосование за посты в группе "Марафон Добра", причём за свои посты голосовать не могут. Зарабатывать их никак не могут.
        
    *   Группы "Образ Будущего" по квоте, тратят только на голосование за посты в группе "Образ Будущего", за свои посты голосовать МОГУТ. Зарабатывают эти мериты при получении меритов группы "Марафон Добра" от других пользователей (1 мерит, переданный пользователями посту Представителя в группе "Марафон Добра", автоматически приносит Представителю на счёт 1 мерит группы "Образ Будущего", ПРИ ЭТОМ МЕРИТЫ "МАРАФОНА ДОБРА" У ПРЕДСТАВИТЕЛЯ НЕ ПОЯВЛЯЮТСЯ). 
        

Группы своей команды по квоте. Тратят их на голосование за посты в группе своей команды или на участие в опросах-голосованиях внутри постов, **голосовать за свои посты не могут**, зарабатывать их никак не могут (получили по квоте -> потратили на голосование, ждём некст квоту).


Инвайты
=======

Генератор инвайтов у Организатора (инвайт-коды, если ссылку на саму регу, там просто код вставлен уже в поле) и у Представителя.

Часть фичи "Список пользователей"? У Представителя точно (список участников группы), где сделать у Орга - хз. На усмотрение Кати.


Группы
======

На текущий момент функционал создания группы обычным пользователем не предусмотрен. На платформе присутствуют группы:

*   "Образ Будущего" (_далее ОБ_) админ – Организатор. Мериты (_см. "Пользователь->Мериты"_) общие с "Марафоном Добра". Создана изначально.
    
*   "Марафон Добра" (_далее МД, господи-прости_), админ – Организатор. Мериты общие с ОБ. Создана изначально
    
*   Группы команд: внутренние группы команд, которые создаются при погашении пользователем инвайта от Организатора на получение статуса Представителя. Флоу: погасили инвайт -> сменилась роль на "Представителя", создалась группа "Команда ИМЯ ПОЛЬЗОВАТЕЛЯ" (дефолт-название), пользователя перебросило в её редактирование, где наверху выведен нотификейшн с что произшло: "Вы теперь представитель, гц-гц, группа ваша вот, заполните её по-человечески для продолжения работы. Пока все обязательные поля не заполнены, группа неактивна. Если чо, группа у вас в профиле".
    
У каждой группы есть:

*   Название\*
    
*   Описание\*
    
*   Аватар\* - генератор аватаров
    
*   Список участников (доступен для просмотра, в нём указываем аву-имя-роль), у админа 
    
*   Лента постов (_см. "Посты"_)
    
*   Настройки
    

Образ Будущего
--------------

Все пользователи платформы получают в ней членство по умолчанию, но:

*   **Зрители** и **Участники** могут ТОЛЬКО просматривать и комментировать посты.
    
*   **Представители** имеют полный функционал: создавать посты, голосовать за посты меритами, комментировать, участвовать в голосованиях внутри постов.
    

_Организатор, само собой, имеет все функции+модераторские._

Марафон Добра
-------------

Все пользователи платформы получают в ней членство по умолчанию, но:

*   **Зрители** и **Участники** могут ТОЛЬКО просматривать и комментировать посты, а также голосовать за них меритами и участвовать в опросах внутри постов.
    
*   **Представители** имеют полный функционал: создавать посты, голосовать за посты меритами (**только за чужие, за свои нельзя**), комментировать, участвовать в опросах внутри постов.
    

_Организатор, само собой, имеет все функции+модераторские._

Внутренняя группа команды
-------------------------

Просматривать её, участвовать в ней и тд могут ТОЛЬКО участники этой команды и Представитель. 

Представитель – админ (_см. "Группы -> Настройки группы"_). Участники – рядовые пользователи с доступом к полному функционалу: создавать посты, голосовать за посты меритами, комментировать, участвовать в голосованиях внутри постов.

Вступление и выход из группы
----------------------------

В "Марафоне Добра" и "Образе Будущего" все пользователи состоят по умолчанию, выйти из них нельзя.

Через инвайты, описано выше.

Страница просмотра групп
------------------------

Показываем только группы, в которых состоит пользователь. И примечание: "Хотите создать команду -> пишите оргу, хотите вступить в команду -> пишите её лидеру".


Страница просмотра участников группы
------------------------------------

Список участников. Указываем аву-имя-роль. У Представителя (админа группы) есть рядом с каждым участником крестик: выгнать нафиг с разжалованием до зрителя.

Также у админа группы есть контрол "Сгенерировать код приглашения", который запускает генерацию инвайта. У суперадмина (организатор) генерится для Представителей, у Представителя (админа маленькой группы) генерится инвайт для участников его группы.

Настройки группы
----------------

Сюда имеют доступ Организатор и Представитель. Здесь можно сменить все данные группы (название-аватар-описание).Посты
=====

**Данные постов:**

*   Название\*
    
*   Описание\*
    
*   Фотография
    
*   Автор поста (выводим аватар-имя-роль).
    
*   Рейтинг
    
*   Дата создания

*   Комментарии (_см. "Комментарии"_).

**Отдельный тип поста: опрос**
Висят в общей ленте, своего рейтинга не имеют (не бампаются). Бывают "бесплатными" (1 голос на пользователя и всё тут, мериты не тратит) и "за мериты" (голосование меритами группы, в которой вывешен опрос, сколько угодно можно потратить, хоть все).


**Посты выводятся в:**

*   Профиле автора (видны только тем, кто состоит в тех же группах, где размещён пост)
    
*   Ленте постов группы, в которой размещены
    
*   На экране просмотра самого поста по прямой ссылке (доступ для тех, кто состоит в группе).
    

ТИПЫ ПОСТОВ
-----------

Три типа:

1. Базовый (Отчёт в "Марафоне Добра", в остальных группах единственный тип поста, не считая опроса): у них есть рейтинг, за них можно голосовать и тд. 
2. Опрос. Рейтинга нет, голосовать нельзя, см. опросы выше.
3. Проект: рейтинга нет, голосовать нельзя, актуален для "Марафона Добра", см. ниже.


_Коммент про Марафон Добра и его типы:_

*   Все посты базового типа (по умолчанию) получают метку "ОТЧËТ". Тут Представители рассказывают о сделанных добрых делах и собирают за них мериты, которыми будут голосовать в "Образе Будущего". Всё стандартно.
    
*   Однако при создании поста в "Марафоне" можно поставить галку "ПРОЕКТ". В этом случае пост выйдет с меткой "ПРОЕКТ" и за него НЕЛЬЗЯ будет голосовать. Это нужно для того, чтобы команды могли рассказывать о своих идеях публике и обсуждать их без абьюза меритов. То есть, "ПРОЕКТ" – обрезанный по функционалу пост, где рейтинга нет.
    

Лента постов
------------

Выводим все данные, перечисленные выше, но на длинном тексте read more. Контролы под постом:

*   Share
    
*   Комментарии
    
*   Избранное (_ПОКА ТОЛЬКО ПРЕДУСМОТРЕТЬ, на январскую версию сделаем в релиз_)
    
*   Рейтинг (если есть) с контролами голосования.
    

**Редактировать СВОИ посты может только Администратор группы (Представитель во внутренней группе/Организатор в МД и ОБ) – чтобы не было так, что собрали мериты и переделали. Предупреждение при создании. 

Редактировать чужие посты не может никто, только удалить (админскими правами или свой пост).**

Справа-вверху на посте 3 точки. Там "Жалоба" (выводит мейлер с отправкой письма организаторам). У Админа группы там ещё "Удалить пост" или, если это его пост, "Редактировать пост".

Сортировка ленты
--------------

Toggle: "в начале новое/в начале популярное"

Поиск по ленте: на январь? **В дизайне закладываем, но не реализуем в 1.0.** 

В "Марафоне Добра" ещё нужен фильтр "ПРОЕКТЫ/ОТЧËТЫ/ОПРОСЫ"

Просмотр поста
--------------

Сверху пост, внизу комментарии. Контролы те же: рейтинг, share.

Создание и редактирование постов
--------------------------------

Стандартный редактор, позволяющий заполнить и/или изменить все данные, заполняемые пользователем.
Вёрстка как в Телеге: rich text без размера шрифтов.

Комментарии
===========

Выводим автора (имя-ава-роль), сам коммент, дату.

Голосовать за комменты в текущей версии нельзя, рейтинга у них нет.

Контролы: share (если вписывается в диз, если нет, не критично, можно без него).

Структура: линейная, вертикальная.

Настройки
=========

В текущей версии приложения просто открывают редактирование профиля пользователя.

Переключение тем, нотификация - всё на будущее. В 1.0 не делаем. Тема у нас по умолчанию сейчас 1, светлая.

Бэклог на январь
----------------

Избранные посты

Продвинутая работа с ценностями

Нотификация

Дэш Орга, когда понадобится

Настройки (темы, вся фигня).

Реализация системы "мериты группы команды - это мериты группы команды, которые у неё и лежат, а не на личном аккаунте Представителя. И посты идут от группы. А Представитель просто казначей-админ, его можно менять без проблем, ничего не затрагивается",
