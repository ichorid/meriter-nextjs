# Meriter Environment Configuration
# Copy this file to .env and fill in the actual values
# This file is used by docker-compose.yml for both web and api services

# ==============================================================================
# DOMAIN CONFIGURATION
# ==============================================================================
# Domain name for Caddy, cookie domain, and application URL derivation
# The full application URL (e.g., https://meriter.pro) is automatically derived from this
# Use localhost for local development
# For production: set to your domain (e.g., meriter.pro)
DOMAIN=localhost

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================
# MongoDB connection string (USED BY API)
# Format: mongodb://username:password@host:port/database
# For MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/database
# For Docker Compose: mongodb://mongodb:27017/meriter
# For local MongoDB on host: mongodb://localhost:27017/meriter
MONGO_URL=mongodb://mongodb:27017/meriter

# ==============================================================================
# WEB APPLICATION (Next.js)
# ==============================================================================
# Port for Next.js application (default: 8001)
WEB_PORT=8001

# Next.js specific public API URL
NEXT_PUBLIC_API_URL=http://localhost:8002

# ==============================================================================
# API APPLICATION (NestJS)
# ==============================================================================
# Port for NestJS API (default: 8002)
API_PORT=8002

# JWT Configuration (for session tokens after Telegram Web Auth) - USED BY API
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# ==============================================================================
# TELEGRAM AUTHENTICATION & BOT
# ==============================================================================
# Bot token from @BotFather (REQUIRED - USED BY BOTH WEB AND API)
# Used for: community features, Telegram Web Auth verification
BOT_TOKEN=

# Bot username without @ (REQUIRED - USED BY BOTH WEB AND API)
# Used by Telegram Login Widget on the web frontend
BOT_USERNAME=meriterbot

# ==============================================================================
# S3/OBJECT STORAGE CONFIGURATION (OPTIONAL - USED BY BOTH WEB AND API)
# ==============================================================================
# S3-compatible storage credentials for Telegram avatar caching
# If not set, avatar/image upload features will be disabled
# Service: Mail.ru Cloud S3, AWS S3, MinIO, or any S3-compatible storage

S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_ENDPOINT=https://hb.bizmrg.com
S3_REGION=ru-msk

# Telegram avatar CDN URL (USED BY WEB)
NEXT_PUBLIC_TELEGRAM_AVATAR_BASE_URL=https://telegram.hb.bizmrg.com

# Enable S3 features (USED BY WEB)
NEXT_PUBLIC_S3_ENABLED=true

# ==============================================================================
# NODE ENVIRONMENT
# ==============================================================================
NODE_ENV=production

# ==============================================================================
# LOGGING
# ==============================================================================
LOG_LEVEL=info

# ==============================================================================
# DOCKER IMAGE VERSIONS (for production deployment)
# ==============================================================================
# Version tags for Docker images from GitHub Container Registry
# These are used by docker-compose.yml (NOT docker-compose.local.yml)
# Example: VERSION_WEB=v0.7.0 or VERSION_WEB=latest
# Leave empty or unset to use 'latest' tag
VERSION_WEB=
VERSION_API=

